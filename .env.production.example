# ============================================
# CipherShare Production Environment Configuration
# ============================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# ============================================
# Environment
# ============================================
NODE_ENV=production

# ============================================
# Redis Configuration
# ============================================
REDIS_HOST=redis
REDIS_PORT=6379
# IMPORTANT: Set a strong password for production Redis
REDIS_PASSWORD=

# External port for Redis (if you need to access from outside Docker)
# REDIS_EXTERNAL_PORT=6379

# ============================================
# Encryption (REQUIRED)
# ============================================
# CRITICAL: Generate a unique key with:
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# This key encrypts all secrets - if lost, all data is unrecoverable
SYSTEM_SECRET_KEY=

# ============================================
# Email Configuration (REQUIRED)
# ============================================
# Choose: "sendgrid" or "mailgun"
EMAIL_PROVIDER=sendgrid

# Your verified sender email
EMAIL_FROM=noreply@yourdomain.com

# ============================================
# SendGrid Configuration (if using EMAIL_PROVIDER=sendgrid)
# ============================================
SENDGRID_API_KEY=

# ============================================
# Mailgun Configuration (if using EMAIL_PROVIDER=mailgun)
# ============================================
MAILGUN_API_KEY=
MAILGUN_DOMAIN=

# ============================================
# Server Configuration
# ============================================
# Application port (inside container, maps to APP_PORT outside)
PORT=3001

# External port for the application
APP_PORT=3001

# Your production frontend URL
CLIENT_URL=https://yourdomain.com

# ============================================
# Security Configuration (IMPORTANT)
# ============================================

# CORS: Comma-separated list of allowed origins
# This prevents unauthorized websites from accessing your API
# Example: ALLOWED_ORIGINS=https://yourdomain.com,https://app.yourdomain.com
ALLOWED_ORIGINS=

# Proxy Configuration
# Set to the number of reverse proxies in front of your app
# Examples:
#   - Direct to internet: 0
#   - Behind nginx: 1
#   - Behind CloudFlare + nginx: 2
#   - Behind ALB + nginx: 2
PROXY_LAYERS=1

# ============================================
# CAPTCHA Configuration (Recommended for production)
# ============================================
# Enable CAPTCHA to prevent bot abuse
CAPTCHA_ENABLED=true

# Get your Turnstile keys at: https://dash.cloudflare.com/?to=/:account/turnstile
# Site key (public - sent to browser)
CF_TURNSTILE_SITEKEY=

# Secret key (private - kept on server)
CF_TURNSTILE_SECRET=

# Optional: Restrict to specific hostnames
# CF_TURNSTILE_ALLOWED_HOSTNAMES=yourdomain.com,app.yourdomain.com

# ============================================
# PRODUCTION CHECKLIST
# ============================================
# Before deploying, ensure:
# [✓] Generated unique SYSTEM_SECRET_KEY (64 hex chars)
# [✓] Set strong REDIS_PASSWORD
# [✓] Configured email provider (SendGrid or Mailgun)
# [✓] Set EMAIL_FROM to verified sender
# [✓] Set CLIENT_URL to production domain
# [✓] Set ALLOWED_ORIGINS to production domains
# [✓] Set PROXY_LAYERS correctly for your infrastructure
# [✓] Enabled CAPTCHA and configured Turnstile keys
# [✓] Never committed this file to version control
# [✓] Backed up SYSTEM_SECRET_KEY in secure location
# ============================================
