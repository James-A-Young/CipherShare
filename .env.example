# ============================================
# CipherShare Environment Configuration
# ============================================

# Environment
NODE_ENV=development

# ============================================
# Redis Configuration
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ============================================
# Encryption (REQUIRED)
# ============================================
# System Encryption Key - MUST be exactly 64 hex characters (32 bytes)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# WARNING: Application will NOT start without a valid key
SYSTEM_SECRET_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef

# ============================================
# Email Configuration (REQUIRED)
# ============================================
# Choose email provider: "sendgrid" or "mailgun"
EMAIL_PROVIDER=sendgrid

# Sender email address - REQUIRED (must be verified with your provider)
EMAIL_FROM=noreply@ciphershare.app

# SendGrid Configuration (if using EMAIL_PROVIDER=sendgrid)
SENDGRID_API_KEY=your_sendgrid_api_key_here

# Mailgun Configuration (if using EMAIL_PROVIDER=mailgun)
MAILGUN_API_KEY=your_mailgun_api_key_here
MAILGUN_DOMAIN=your-domain.com

# ============================================
# Server Configuration
# ============================================
PORT=3001
CLIENT_URL=http://localhost:5173

# ============================================
# Security Configuration
# ============================================

# CORS Configuration (RECOMMENDED for production)
# Comma-separated list of allowed origins. If not set, defaults to CLIENT_URL
# Example: ALLOWED_ORIGINS=https://ciphershare.app,https://app.ciphershare.com
# Leave commented for development (allows CLIENT_URL only)
# ALLOWED_ORIGINS=

# Proxy Configuration (IMPORTANT if behind reverse proxy)
# Number of reverse proxy layers (nginx, CloudFlare, ALB, load balancer, etc.)
# Set to 1 if behind a single reverse proxy, 2 if behind two, etc.
# This ensures correct client IP detection for rate limiting
# Default: 1 (recommended for most Docker/K8s deployments)
PROXY_LAYERS=1

# ============================================
# CAPTCHA Configuration (Optional - Cloudflare Turnstile)
# ============================================
# Enable/disable CAPTCHA requirement (true/false, 1/0, yes/no)
# Set to false to disable CAPTCHA for development or testing
# Recommended: true for production
CAPTCHA_ENABLED=true

# Public site key (safe to expose to browser)
# The client fetches this via GET /api/config/metadata
# Get your keys at: https://dash.cloudflare.com/?to=/:account/turnstile
# Required only if CAPTCHA_ENABLED=true
CF_TURNSTILE_SITEKEY=

# Secret key used by the server to validate tokens
# KEEP THIS PRIVATE - never commit to version control
# Required only if CAPTCHA_ENABLED=true
CF_TURNSTILE_SECRET=

# Optional: Comma-separated list of allowed hostnames returned by Turnstile
# Example: CF_TURNSTILE_ALLOWED_HOSTNAMES=example.com,app.example.com
# If set, server will reject tokens whose verified hostname doesn't match
# Leave empty to accept any hostname
CF_TURNSTILE_ALLOWED_HOSTNAMES=
